<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FormCrafter - Custom Form Builder</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      * {
        font-family: "Inter", sans-serif;
      }

      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .form-field-transition {
        transition: all 0.3s ease;
      }

      .shake {
        animation: shake 0.5s;
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      .notification {
        transition: all 0.3s ease;
      }

      .option-item {
        transition: all 0.2s ease;
      }

      .option-item:hover {
        transform: translateX(2px);
      }

      .preview-field {
        transition: all 0.2s ease;
      }

      .preview-field:focus-within {
        transform: translateY(-2px);
      }

      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      .code-block {
        font-family: "Fira Code", monospace;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Function to convert text to camelCase
      const toCamelCase = (text) => {
        return text
          .replace(/(?:^\w|[A-Z]|\b\w)/g, (word, index) =>
            index === 0 ? word.toLowerCase() : word.toUpperCase()
          )
          .replace(/\s+/g, "")
          .replace(/[^a-zA-Z0-9]/g, "");
      };

      // Custom validation rules
      const validationRules = {
        email: {
          pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
          message: "Please enter a valid email address",
        },
        password: {
          minLength: 6,
          message: "Password must be at least 6 characters",
        },
        number: {
          pattern: /^-?\d*(\.\d+)?$/,
          message: "Please enter a valid number",
        },
        tel: {
          pattern: /^[+]?[\d\s\-()]{10,}$/,
          message: "Please enter a valid phone number",
        },
        url: {
          pattern: /^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w.-]*)*\/?$/,
          message: "Please enter a valid URL",
        },
      };

      const FormCrafter = () => {
        const [formName, setFormName] = useState("MyForm");
        const [fields, setFields] = useState([]);
        const [editingIndex, setEditingIndex] = useState(-1);

        const [fieldType, setFieldType] = useState("text");
        const [fieldLabel, setFieldLabel] = useState("");
        const [fieldPlaceholder, setFieldPlaceholder] = useState("");
        const [fieldRequired, setFieldRequired] = useState(false);
        const [fieldOptions, setFieldOptions] = useState([""]);

        const [formData, setFormData] = useState({});
        const [formErrors, setFormErrors] = useState({});
        const [notification, setNotification] = useState("");
        const [touched, setTouched] = useState({});

        // Initialize with a sample field
        useEffect(() => {
          setFields([
            {
              type: "text",
              label: "Full Name",
              placeholder: "Enter your full name",
              required: true,
              options: [],
            },
          ]);
        }, []);

        useEffect(() => {
          // Initialize formData with empty values for each field
          const initialData = {};
          const initialErrors = {};
          const initialTouched = {};

          fields.forEach((field) => {
            const key = toCamelCase(field.label);
            initialData[key] = "";
            initialErrors[key] = "";
            initialTouched[key] = false;
          });

          setFormData(initialData);
          setFormErrors(initialErrors);
          setTouched(initialTouched);
        }, [fields]);

        const showNotification = (message, type = "success") => {
          setNotification({ message, type });
          setTimeout(() => setNotification(""), 3000);
        };

        const validateField = (fieldName, value, fieldType, fields) => {
          // Find the field configuration
          const fieldConfig = fields.find(
            (f) => toCamelCase(f.label) === fieldName
          );

          // Check if field is required and empty
          if (fieldConfig && fieldConfig.required && !value.trim()) {
            return "This field is required";
          }

          // Add type-specific validation
          if (value && validationRules[fieldType]) {
            const rule = validationRules[fieldType];

            if (rule.pattern && !rule.pattern.test(value)) {
              return rule.message;
            }

            if (rule.minLength && value.length < rule.minLength) {
              return rule.message;
            }
          }

          return "";
        };

        const handleAddOption = () => {
          setFieldOptions([...fieldOptions, ""]);
        };

        const handleOptionChange = (index, value) => {
          const updatedOptions = [...fieldOptions];
          updatedOptions[index] = value;
          setFieldOptions(updatedOptions);
        };

        const handleRemoveOption = (index) => {
          if (fieldOptions.length > 1) {
            const updatedOptions = [...fieldOptions];
            updatedOptions.splice(index, 1);
            setFieldOptions(updatedOptions);
          }
        };

        const handleAddField = () => {
          if (!fieldLabel) {
            showNotification("Please enter a field label", "error");
            return;
          }

          const newField = {
            type: fieldType,
            label: fieldLabel,
            placeholder: fieldPlaceholder,
            required: fieldRequired,
            options:
              fieldType === "select"
                ? fieldOptions.filter((opt) => opt.trim() !== "")
                : [],
          };

          if (editingIndex === -1) {
            // Add new field
            setFields([...fields, newField]);
            showNotification("Field added successfully");
          } else {
            // Update existing field
            const updatedFields = [...fields];
            updatedFields[editingIndex] = newField;
            setFields(updatedFields);
            setEditingIndex(-1);
            showNotification("Field updated successfully");
          }

          // Reset form
          setFieldType("text");
          setFieldLabel("");
          setFieldPlaceholder("");
          setFieldRequired(false);
          setFieldOptions([""]);
        };

        const handleEditField = (index) => {
          const field = fields[index];
          setFieldType(field.type);
          setFieldLabel(field.label);
          setFieldPlaceholder(field.placeholder);
          setFieldRequired(field.required);
          setFieldOptions(field.type === "select" ? field.options : [""]);
          setEditingIndex(index);
        };

        const handleRemoveField = (index) => {
          const updatedFields = [...fields];
          updatedFields.splice(index, 1);
          setFields(updatedFields);
          showNotification("Field removed successfully");
        };

        const handleChange = (fieldKey, value, fieldType) => {
          setFormData({
            ...formData,
            [fieldKey]: value,
          });

          // Validate on change if the field has been touched
          if (touched[fieldKey]) {
            const field = fields.find((f) => toCamelCase(f.label) === fieldKey);
            if (field) {
              const error = validateField(field, value, field.type, fields);
              setFormErrors({
                ...formErrors,
                [fieldKey]: error,
              });
            }
          }
        };

        const handleBlur = (fieldKey) => {
          setTouched({
            ...touched,
            [fieldKey]: true,
          });

          // Validate on blur
          const field = fields.find((f) => toCamelCase(f.label) === fieldKey);
          if (field) {
            const error = validateField(
              fieldKey,
              formData[fieldKey],
              field.type,
              fields
            );
            setFormErrors({
              ...formErrors,
              [fieldKey]: error,
            });
          }
        };

        const handleSubmit = (e) => {
          e.preventDefault();

          // Mark all fields as touched
          const allTouched = {};
          Object.keys(formData).forEach((key) => {
            allTouched[key] = true;
          });
          setTouched(allTouched);

          // Validate all fields
          const errors = {};
          let hasErrors = false;

          fields.forEach((field) => {
            const fieldKey = toCamelCase(field.label);
            const error = validateField(
              fieldKey,
              formData[fieldKey],
              field.type,
              fields
            );
            errors[fieldKey] = error;
            if (error) hasErrors = true;
          });

          setFormErrors(errors);

          if (hasErrors) {
            showNotification("Please fix the errors in the form", "error");
            return;
          }

          showNotification("Form submitted successfully!");
          console.log("Form Data:", formData);
        };

        const handleCancel = () => {
          // Reset form data to empty values
          const resetData = {};
          const resetErrors = {};
          const resetTouched = {};

          Object.keys(formData).forEach((key) => {
            resetData[key] = "";
            resetErrors[key] = "";
            resetTouched[key] = false;
          });

          setFormData(resetData);
          setFormErrors(resetErrors);
          setTouched(resetTouched);
          showNotification("Form cancelled");
        };

        const generateReactCode = () => {
          const fieldComponents = fields
            .map((field) => {
              const fieldKey = toCamelCase(field.label);

              if (field.type === "textarea") {
                return `        <div className="mb-4">
          <label htmlFor="${fieldKey}" className="block text-sm font-medium text-gray-700 mb-1">
              ${field.label}${
                  field.required
                    ? '<span className="text-red-500">*</span>'
                    : ""
                }
          </label>
          <textarea
              id="${fieldKey}"
              placeholder="${field.placeholder}"
              value={formData.${fieldKey}}
              onChange={(e) => handleChange('${fieldKey}', e.target.value)}
              onBlur={() => handleBlur('${fieldKey}')}
              className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          />
          {formErrors.${fieldKey} && <p className="mt-1 text-sm text-red-600">{formErrors.${fieldKey}}</p>}
      </div>`;
              } else if (field.type === "select") {
                const optionsCode = field.options
                  .map(
                    (option) =>
                      ` <option value="${option}">${option}</option>`
                  )
                  .join("\n");

                return `  <div className="mb-4">
                  <label htmlFor="${fieldKey}" className="block text-sm font-medium text-gray-700 mb-1">
  ${field.label}${
                  field.required
                    ? '<span className="text-red-500">*</span>'
                    : ""
                }</label>
                  <select
                      id="${fieldKey}"
                      value={formData.${fieldKey}}
                      onChange={(e) => handleChange('${fieldKey}', e.target.value)}
                      onBlur={() => handleBlur('${fieldKey}')}
                      className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  >
                      <option value="">Select an option</option>
      ${optionsCode}
                  </select>
                  {formErrors.${fieldKey} && <p className="mt-1 text-sm text-red-600">{formErrors.${fieldKey}}</p>}
              </div>`;
              } else {
                return `<div className="mb-4">
                  <label htmlFor="${fieldKey}" className="block text-sm font-medium text-gray-700 mb-1">
  ${field.label}${
                  field.required
                    ? '  <span className="text-red-500">*</span>'
                    : ""
                }</label>
                  <input
                      type="${field.type}"
                      id="${fieldKey}"
                      placeholder="${field.placeholder}"
                      value={formData.${fieldKey}}
                      onChange={(e) => handleChange('${fieldKey}', e.target.value)}
                      onBlur={() => handleBlur('${fieldKey}')}
                      className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                  {formErrors.${fieldKey} && <p className="mt-1 text-sm text-red-600">{formErrors.${fieldKey}}</p>}
              </div>`;
              }
            })
            .join("\n");

          const initialStateCode = fields
            .map((field) => `${toCamelCase(field.label)}: ''`)
            .join(",\n        ");

          const initialErrorsCode = fields
            .map((field) => `${toCamelCase(field.label)}: ''`)
            .join(",\n        ");

          const initialTouchedCode = fields
            .map((field) => `${toCamelCase(field.label)}: false`)
            .join(",\n        ");

          return `import React, { useState } from 'react';

      const ${formName} = () => {
          const [formData, setFormData] = useState({
              ${initialStateCode}
          });

          const [formErrors, setFormErrors] = useState({
              ${initialErrorsCode}
          });

          const [touched, setTouched] = useState({
              ${initialTouchedCode}
          });

          const validateField = (fieldName, value) => {
              // Check required fields
              const requiredFields = {
                  ${fields
                    .filter((f) => f.required)
                    .map((f) => `${toCamelCase(f.label)}: true`)
                    .join(",\n            ")}
              };

              if (requiredFields[fieldName] && !value.trim()) {
                  return 'This field is required';
              }

              // Add type-specific validation rules as needed
              ${fields
                .filter((f) => validationRules[f.type])
                .map((f) => {
                  const fieldKey = toCamelCase(f.label);
                  const rule = validationRules[f.type];
                  if (rule.pattern) {
                    return `if (fieldName === '${fieldKey}' && value && !${rule.pattern}.test(value)) {
                  return '${rule.message}';
              }`;
                  } else if (rule.minLength) {
                    return `if (fieldName === '${fieldKey}' && value && value.length < ${rule.minLength}) {
                  return '${rule.message}';
              }`;
                  }
                  return "";
                })
                .join("\n        ")}

              return '';
          };

          const handleChange = (field, value) => {
              setFormData({
                  ...formData,
                  [field]: value
              });

              // Validate the field if it's been touched
              if (touched[field]) {
                  const error = validateField(field, value);
                  setFormErrors({
                      ...formErrors,
                      [field]: error
                  });
              }
          };

          const handleBlur = (field) => {
              setTouched({
                  ...touched,
                  [field]: true
              });

              // Validate the field on blur
              const error = validateField(field, formData[field]);
              setFormErrors({
                  ...formErrors,
                  [field]: error
              });
          };

          const handleSubmit = (e) => {
              e.preventDefault();

              // Mark all fields as touched
              const allTouched = {};
              Object.keys(formData).forEach(key => {
                  allTouched[key] = true;
              });
              setTouched(allTouched);

              // Validate all fields
              const errors = {};
              let hasErrors = false;

              Object.keys(formData).forEach(key => {
                  const error = validateField(key, formData[key]);
                  errors[key] = error;
                  if (error) hasErrors = true;
              });

              setFormErrors(errors);

              if (hasErrors) {
                  console.log('Form has errors');
                  return;
              }

              // Add your form submission logic here
              console.log('Form submitted:', formData);
          };

          const handleCancel = () => {
              // Add cancel logic here
              setFormData({
                  ${fields
                    .map((field) => `${toCamelCase(field.label)}: ''`)
                    .join(",\n            ")}
              });
              setFormErrors({
                  ${fields
                    .map((field) => `${toCamelCase(field.label)}: ''`)
                    .join(",\n            ")}
              });
              setTouched({
                  ${fields
                    .map((field) => `${toCamelCase(field.label)}: false`)
                    .join(",\n            ")}
              });
          };

          return (
              <form onSubmit={handleSubmit} className="max-w-md mx-auto p-6 bg-white rounded-lg shadow-md">
      ${fieldComponents}
                  <div className="flex space-x-4 mt-6">
                      <button
                          type="submit"
                          className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                      >
                          Submit
                      </button>
                      <button
                          type="button"
                          onClick={handleCancel}
                          className="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
                      >
                          Cancel
                      </button>
                  </div>
              </form>
          );
      };

      export default ${formName};`;
        };

        return (
          <div className="container mx-auto px-4 py-8">
            <header className="text-center mb-12">
              <h1 className="text-4xl font-bold text-gray-800 mb-3">
                FormCrafter
              </h1>
              <p className="text-xl text-gray-600">
                Create highly customizable React forms with a simple GUI
              </p>
            </header>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
              <div className="bg-white rounded-xl shadow-lg p-6">
                <h2 className="text-2xl font-semibold text-gray-800 mb-6 pb-3 border-b border-gray-200">
                  Form Builder
                </h2>

                <div className="mb-6">
                  <label
                    htmlFor="formName"
                    className="block text-sm font-medium text-gray-700 mb-2"
                  >
                    Form Name
                  </label>
                  <input
                    type="text"
                    id="formName"
                    value={formName}
                    onChange={(e) => setFormName(e.target.value)}
                    placeholder="Enter form name"
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>

                <h3 className="text-lg font-medium text-gray-800 mb-4">
                  Add Field
                </h3>

                <div className="mb-4">
                  <label
                    htmlFor="fieldType"
                    className="block text-sm font-medium text-gray-700 mb-2"
                  >
                    Field Type
                  </label>
                  <select
                    id="fieldType"
                    value={fieldType}
                    onChange={(e) => setFieldType(e.target.value)}
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  >
                    <option value="text">Text</option>
                    <option value="email">Email</option>
                    <option value="password">Password</option>
                    <option value="number">Number</option>
                    <option value="textarea">Textarea</option>
                    <option value="select">Select</option>
                    <option value="date">Date</option>
                    <option value="tel">Phone</option>
                    <option value="url">URL</option>
                  </select>
                </div>

                <div className="mb-4">
                  <label
                    htmlFor="fieldLabel"
                    className="block text-sm font-medium text-gray-700 mb-2"
                  >
                    Field Label
                  </label>
                  <input
                    type="text"
                    id="fieldLabel"
                    value={fieldLabel}
                    onChange={(e) => setFieldLabel(e.target.value)}
                    placeholder="Enter field label"
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>

                <div className="mb-4">
                  <label
                    htmlFor="fieldPlaceholder"
                    className="block text-sm font-medium text-gray-700 mb-2"
                  >
                    Placeholder
                  </label>
                  <input
                    type="text"
                    id="fieldPlaceholder"
                    value={fieldPlaceholder}
                    onChange={(e) => setFieldPlaceholder(e.target.value)}
                    placeholder="Enter field placeholder"
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>

                {fieldType === "select" && (
                  <div className="mb-4">
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Options
                    </label>
                    <div className="space-y-2">
                      {fieldOptions.map((option, index) => (
                        <div
                          key={index}
                          className="option-item flex items-center space-x-2"
                        >
                          <input
                            type="text"
                            value={option}
                            onChange={(e) =>
                              handleOptionChange(index, e.target.value)
                            }
                            placeholder={`Option ${index + 1}`}
                            className="flex-1 px-3 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                          />
                          <button
                            className="remove-option w-8 h-8 flex items-center justify-center bg-red-100 text-red-600 rounded-md hover:bg-red-200"
                            onClick={() => handleRemoveOption(index)}
                            disabled={fieldOptions.length === 1}
                            type="button"
                          >
                            Ã—
                          </button>
                        </div>
                      ))}
                      <button
                        className="add-option mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center"
                        onClick={handleAddOption}
                        type="button"
                      >
                        <span className="mr-1">+</span> Add Option
                      </button>
                    </div>
                  </div>
                )}

                <div className="flex items-center mb-6">
                  <input
                    type="checkbox"
                    id="fieldRequired"
                    checked={fieldRequired}
                    onChange={(e) => setFieldRequired(e.target.checked)}
                    className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                  />
                  <label
                    htmlFor="fieldRequired"
                    className="ml-2 block text-sm text-gray-700"
                  >
                    Required Field
                  </label>
                </div>

                <button
                  onClick={handleAddField}
                  className="w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                >
                  {editingIndex === -1 ? "Add Field" : "Update Field"}
                </button>

                <div className="mt-8 pt-6 border-t border-gray-200">
                  <h3 className="text-lg font-medium text-gray-800 mb-4">
                    Form Fields
                  </h3>
                  {fields.length === 0 ? (
                    <p className="text-gray-500 text-center py-4">
                      No fields added yet. Start by adding a field above.
                    </p>
                  ) : (
                    <div className="space-y-3">
                      {fields.map((field, index) => (
                        <div
                          key={index}
                          className="field-item bg-gray-50 p-4 rounded-lg flex justify-between items-center"
                        >
                          <div className="field-info">
                            <div className="font-medium text-gray-800">
                              {field.label}
                            </div>
                            <div className="text-sm text-gray-500">
                              {field.type}{" "}
                              {field.required && (
                                <span className="text-red-500">*</span>
                              )}
                            </div>
                          </div>
                          <div className="field-actions flex space-x-2">
                            <button
                              className="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"
                              onClick={() => handleEditField(index)}
                            >
                              Edit
                            </button>
                            <button
                              className="px-3 py-1 bg-red-100 text-red-600 rounded-md hover:bg-red-200"
                              onClick={() => handleRemoveField(index)}
                            >
                              Remove
                            </button>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-xl shadow-lg p-6">
                <h2 className="text-2xl font-semibold text-gray-800 mb-6 pb-3 border-b border-gray-200">
                  Form Preview
                </h2>

                <form
                  className="preview-form space-y-4"
                  onSubmit={handleSubmit}
                >
                  {fields.map((field, index) => {
                    const fieldKey = toCamelCase(field.label);
                    const hasError = formErrors[fieldKey];

                    return (
                      <div
                        key={index}
                        className={`preview-field ${
                          hasError && touched[fieldKey] ? "shake" : ""
                        }`}
                      >
                        <label
                          htmlFor={`preview-${index}`}
                          className={`block text-sm font-medium mb-1 ${
                            field.required ? "text-gray-700" : "text-gray-600"
                          }`}
                        >
                          {field.label}
                          {field.required && (
                            <span className="text-red-500"> *</span>
                          )}
                        </label>
                        {field.type === "textarea" ? (
                          <textarea
                            id={`preview-${index}`}
                            placeholder={field.placeholder}
                            value={formData[fieldKey] || ""}
                            onChange={(e) =>
                              handleChange(fieldKey, e.target.value, field.type)
                            }
                            onBlur={() => handleBlur(fieldKey)}
                            className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${
                              hasError && touched[fieldKey]
                                ? "border-red-500 focus:ring-red-500"
                                : "border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                            }`}
                          />
                        ) : field.type === "select" ? (
                          <select
                            id={`preview-${index}`}
                            value={formData[fieldKey] || ""}
                            onChange={(e) =>
                              handleChange(fieldKey, e.target.value, field.type)
                            }
                            onBlur={() => handleBlur(fieldKey)}
                            className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${
                              hasError && touched[fieldKey]
                                ? "border-red-500 focus:ring-red-500"
                                : "border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                            }`}
                          >
                            <option value="">Select an option</option>
                            {field.options.map((option, optIndex) => (
                              <option key={optIndex} value={option}>
                                {option}
                              </option>
                            ))}
                          </select>
                        ) : (
                          <input
                            type={field.type}
                            id={`preview-${index}`}
                            placeholder={field.placeholder}
                            value={formData[fieldKey] || ""}
                            onChange={(e) =>
                              handleChange(fieldKey, e.target.value, field.type)
                            }
                            onBlur={() => handleBlur(fieldKey)}
                            className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 ${
                              hasError && touched[fieldKey]
                                ? "border-red-500 focus:ring-red-500"
                                : "border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                            }`}
                          />
                        )}
                        {hasError && touched[fieldKey] && (
                          <p className="mt-1 text-sm text-red-600">
                            {hasError}
                          </p>
                        )}
                      </div>
                    );
                  })}

                  <div className="form-actions flex space-x-4 pt-4">
                    <button
                      type="submit"
                      className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                    >
                      Submit
                    </button>
                    <button
                      type="button"
                      onClick={handleCancel}
                      className="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
                    >
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
            </div>

            <div className="bg-gray-800 rounded-xl shadow-lg p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-2xl font-semibold text-white">
                  React Code
                </h2>
                <button
                  onClick={() => {
                    navigator.clipboard.writeText(generateReactCode());
                    showNotification("Code copied to clipboard!");
                  }}
                  className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800"
                >
                  Copy Code
                </button>
              </div>
              <pre className="bg-gray-900 p-4 rounded-lg overflow-x-auto">
                <code className="text-white code-block">
                  {generateReactCode()}
                </code>
              </pre>
            </div>

            {notification && (
              <div
                className={`notification fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg ${
                  notification.type === "error" ? "bg-red-500" : "bg-green-500"
                } text-white`}
              >
                {notification.message}
              </div>
            )}
          </div>
        );
      };

      ReactDOM.render(<FormCrafter />, document.getElementById("root"));
    </script>
  </body>
</html>
